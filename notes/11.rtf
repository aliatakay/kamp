{\rtf1\ansi\ansicpg1254\deff0\nouicompat\deflang1055{\fonttbl{\f0\fnil\fcharset162 Calibri;}{\f1\fnil\fcharset0 Calibri;}{\f2\fnil\fcharset238 Calibri;}{\f3\fnil Consolas;}{\f4\fnil\fcharset162 Consolas;}{\f5\fnil\fcharset0 Consolas;}}
{\colortbl ;\red255\green0\blue0;\red0\green0\blue0;\red0\green0\blue255;\red43\green145\blue175;}
{\*\generator Riched20 10.0.17763}\viewkind4\uc1 
\pard\sa200\sl276\slmult1\qj\f0\fs28 Kalan derslerde tamamen MYFinalProject \f1\lang1033\'fc\f0\lang1055 zerinden devam edece\f2\u287?\f0 iz.\par
ayn\f2\u305?\f0  projeyi her derste geli\f2\'ba\f0 tirece\f2\u287?\f0 iz.\par
son derste Result yap\f2\u305?\f0 s\f2\u305?\f0 n\f2\u305?\f0  eklemi\f2\'ba\f0 tik.\par
----------------------------\par
Bu derste WEB API geli\f2\'ba\f0 tirece\f2\u287?\f0 iz.\par
(\f1\lang1033\'f6\f0\lang1055 devlerini yapanlara yak\f2\u305?\f0 n zamanda bir s\f1\lang1033\'fc\f0\lang1055 rpriz olacakm\f2\u305?\'ba\f0 .)\par
\f1\lang31\par
\f0\lang1055 solution'a yeni bir proje ekliyoruz.\par
aramaya asp.net yazo\f2\u305?\f0 yoruz.\par
\cf1 asp.net \cf0 = microsoft'un WEB geli\f2\'ba\f0 tirme ortamlar\f2\u305?\f0  ve k\f1\lang1033\'fc\f0\lang1055 t\f1\lang1033\'fc\f0\lang1055 phanelerinin topland\f2\u305?\u287?\u305?\f0  bir yap\f2\u305?\f0 d\f2\u305?\f0 r.\par
\cf1 .net \cf0 = genel framework'e verilen isimdir.\par
\cf1 asp.net \cf0 ise bu framework i\f1\lang1033\'e7\f0\lang1055 indeki \cf1 WEB Projelerine \cf0 verilen isimdir.\par
------------------------\par
API = bir Restful mimari ile \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\f0 ma ortam\f2\u305?\f0  sunar.\par
\par
Restful Mimari = bizim proje geli\f2\'ba\f0 tirdi\f2\u287?\f0 imiz .net ortam\f2\u305?\f0 n\f2\u305?\f0  tan\f2\u305?\f0 mayan uygulamalar\f2\u305?\f0 n, bizim projemizle ileti\f2\'ba\f0 im kurabilmesini sa\f2\u287?\f0 layan yap\f2\u305?\f0 d\f2\u305?\f0 r.\par
\f1\lang31\par
\f0\lang1055 her geli\f2\'ba\f0 tirme ortam\f2\u305?\f0 n\f2\u305?\f0 n kendine has bir Restful geli\f2\'ba\f0 tirme ortam\f2\u305?\f0  vard\f2\u305?\f0 r.\par
\f1\lang1033\'d6\f0\lang1055 rne\f2\u287?\f0 in .NET d\f1\lang1033\'fc\f0\lang1055 nyas\f2\u305?\f0 nda \cf1 asp.net web api\cf0 'dir.\par
----\par
solutiona ekleyece\f2\u287?\f0 imiz proje tipi "\cf1 asp.net core web application\cf0 "\f1\lang31\par
\f0\lang1055 proje ad\f2\u305?\f0  = WebAPI\par
kar\f2\'ba\u305?\f0 m\f2\u305?\f0 za gelen ekranda asp.net ortam\f2\u305?\f0 nda bize sunulan \f1\lang1033\'e7\f0\lang1055 e\f2\'ba\f0 itli \f2\'ba\f0 ablonlar var. bunlardan birini se\f1\lang1033\'e7\f0\lang1055 memizi istiyor.\par
Burada kar\f2\'ba\u305?\f0 m\f2\u305?\f0 za \f1\lang1033\'e7\f2\lang1055\u305?\f0 kan se\f1\lang1033\'e7\f0\lang1055 enekler asl\f2\u305?\f0 nda farkl\f2\u305?\f0  api \f2\'ba\f0 ablonlar\f2\u305?\f0 d\f2\u305?\f0 r.\par
\f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 in API isimli \f2\'ba\f0 ablon, en g\f1\lang1033\'fc\f0\lang1055 ncel ve tercih edilen yap\f2\u305?\f0 d\f2\u305?\f0 r. Bu yap\f2\u305?\f0 da api, backend taraf\f2\u305?\f0 nda \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\u305?\f0 r, ve bir server vas\f2\u305?\f0 tas\f2\u305?\f0 yla, herhangi bir frontend yap\f2\u305?\f0  ile data al\f2\u305?\'ba\f0 veri\f2\'ba\f0 i yapar. g\f1\lang1033\'fc\f0\lang1055 n\f1\lang1033\'fc\f0\lang1055 m\f1\lang1033\'fc\f0\lang1055 zde tercih edilen yap\f2\u305?\f0  budur.\par
onun d\f2\u305?\'ba\u305?\f0 nda Razor page ve MVC ad\f2\u305?\f0 nda alternatif \f2\'ba\f0 ablonlar da mevcuttur. ancak bunlar g\f1\lang1033\'f6\f0\lang1055 rece daha az tercih edilen yap\f2\u305?\f0 lard\f2\u305?\f0 r. bu \f2\'ba\f0 ablonlar \f1\lang1033\'e7\'f6\f0\lang1055 p oldu anlam\f2\u305?\f0  ta\f2\'ba\u305?\f0 maz, ancak g\f1\lang1033\'fc\f0\lang1055 n\f1\lang1033\'fc\f0\lang1055 m\f1\lang1033\'fc\f0\lang1055 zde backend ve frontend tamamen koptu\f2\u287?\f0 u i\f1\lang1033\'e7\f0\lang1055 in ve bir s\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055  farkl\f2\u305?\f0  frontend yap\f2\u305?\f0  ile ileti\f2\'ba\f0 im kurmak istedi\f2\u287?\f0 imiz i\f1\lang1033\'e7\f0\lang1055 in, g\f1\lang1033\'fc\f0\lang1055 n\f1\lang1033\'fc\f0\lang1055 m\f1\lang1033\'fc\f0\lang1055 zde en \f1\lang1033\'e7\f0\lang1055 ok API tercih edilir.\par
o y\f1\lang1033\'fc\f0\lang1055 zden API olan se\f1\lang1033\'e7\f0\lang1055 ene\f2\u287?\f0 i se\f1\lang1033\'e7\f0\lang1055 iyoruz.\par
versiyona dikkat ediyoruz se\f1\lang1033\'e7\f0\lang1055 erken.\par
create diyerek olu\f2\'ba\f0 turuyoruz.\par
---------------------\par
bug\f1\lang1033\'fc\f0\lang1055 ne kadar testlerimizi konsol \f1\lang1033\'fc\f0\lang1055 zerinden yapt\f2\u305?\f0 k.\par
bug\f1\lang1033\'fc\f0\lang1055 nden itibaren api \f1\lang1033\'fc\f0\lang1055 zerinden ilerleyece\f2\u287?\f0 iz.\par
api projesini set as startup project olarak ayarl\f2\u305?\f0 yoruz.\par
\par
yukar\f2\u305?\f0 daki run tu\f2\'ba\f0 una bakarsak, IIS express g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 z.\par
bizim i\f1\lang1033\'e7\f0\lang1055 in sanal bir IIS ortam\f2\u305?\f0  olu\f2\'ba\f0 turuldu.\par
-------------\par
Controllers diye bir folder g\f1\lang1033\'f6\f0\lang1055 rece\f2\u287?\f0 iz proje alt\f2\u305?\f0 nda.\par
\cf1 Controllers\cf0 , gelen b\f1\lang1033\'fc\f0\lang1055 t\f1\lang1033\'fc\f0\lang1055 n istekleri kar\f2\'ba\u305?\f0 layan b\f1\lang1033\'f6\f0\lang1055 l\f1\lang1033\'fc\f0\lang1055 md\f1\lang1033\'fc\f0\lang1055 r.\par
\par
\f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 in biz bir eticaret sisteminin mobil client'\f2\u305?\f0 y\f2\u305?\f0 z. (business katman\f2\u305?\f0 nda yap\f2\u305?\f0 t\f2\u305?\u287?\u305?\f0 m\f2\u305?\f0 z yap\f2\u305?\f0 lar gibi) \f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 nleri listelemek isteyebiliriz yani getall.\par
\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 nleri kategori numaralar\f2\u305?\f0 na g\f1\lang1033\'f6\f0\lang1055 re listelemek isteyebiliriz. getallbycategory gibi....\par
i\f2\'ba\f0 te bunlar\f2\u305?\f0 n tamam\f2\u305?\f0 n\f2\u305?\f0  bir "istek" haline getirece\f2\u287?\f0 iz.\par
\f1\lang1033\par
\par
\f0\lang1055 peki bu istek nas\f2\u305?\f0 l oluyor?\par
Restful yap\f2\u305?\f0 ; kar\f2\'ba\u305?\f0 m\f2\u305?\f0 za HTTP protokol olarak geliyor.\par
(bunun sebebi, client olan t\f1\lang1033\'fc\f0\lang1055 m yap\f2\u305?\f0 lar ile backend'in ileti\f2\'ba\f0 im kurma kanal\f2\u305?\f0  "internet" gerektirir. bu sebepten dolay\f2\u305?\f0  RESTful yap\f2\u305?\f0 lar HTTP protokol kullan\f2\u305?\f0 r. bir mobil client, istek yapt\f2\u305?\u287?\u305?\f0 nda, yani \f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 in kategoriye g\f1\lang1033\'f6\f0\lang1055 re \f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 n listeledi\f2\u287?\f0 inde, bu istek internet sayesinde http request olarak al\f2\u305?\f0 n\f2\u305?\f0 r. ve api vas\f2\u305?\f0 tas\f2\u305?\f0 yla backend'e ula\f2\'ba\f0 t\f2\u305?\f0 r\f2\u305?\f0 l\f2\u305?\f0 r.)\par
\cf1\f2\u304?\'aa\f0 TE B\f2\u304?\f0 Z DE CONTROLLER \f2\u304?\f1\lang1033\'c7\f2\lang1055\u304?\f0 NDE, B\f2\u304?\f0 ZE YAPILAB\f2\u304?\f0 LECEK \f2\u304?\f0 STEKLER\f2\u304?\f0  KODLUYORUZ.\cf0\par
\f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 in, insanlar bize bir HttpGet iste\f2\u287?\f0 inde bulunabilir. [HttpGet] gibi.\par
controller i\f1\lang1033\'e7\f0\lang1055 inde tamamen; "client bize nas\f2\u305?\f0 l ve ne t\f1\lang1033\'fc\f0\lang1055 r isteklerde bulunabilir" olay\f2\u305?\f0 n\f2\u305?\f0  kodluyoruz.\par
(\f2\'ba\f0 u an api projesi ekledik, controllers alt\f2\u305?\f0 nda \f1\lang1033\'f6\f0\lang1055 rnek bir s\f2\u305?\f0 n\f2\u305?\f0 f zaten olu\f2\'ba\f0 tu. WeatherForecastController \f2\'ba\f0 eklinde. bu s\f2\u305?\f0 n\f2\u305?\f0 f i\f1\lang1033\'e7\f0\lang1055 inden zaten httpget gibi yap\f2\u305?\f0 lar g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 lebilir.)\par
(restful mimarilerde asl\f2\u305?\f0 nda bir mvc \f2\'ba\f0 ablonuna g\f1\lang1033\'f6\f0\lang1055 re daha basittir. \f1\lang1033\'e7\'fc\f0\lang1055 nk\f1\lang1033\'fc\f0\lang1055  api \f2\'ba\f0 ablonunda "view" yoktur. temel olarak controller kodlar\f2\u305?\f0 n\f2\u305?\f0  yaz\f2\u305?\f0 yoruz diyebiliriz.)\par
bu derste bu yap\f2\u305?\f0 lar\f2\u305?\f0  tasarlayaca\f2\u287?\u305?\f0 z.\par
---------------------\par
kendi controller \f2\u305?\f0 m\f2\u305?\f0 z\f2\u305?\f0  olu\f2\'ba\f0 turaca\f2\u287?\u305?\f0 z.\par
Controllers > Add > Controller t\f2\u305?\f0 kla > Common alt\f2\u305?\f0 nda API se\f1\lang1033\'e7\f0\lang1055 iyoruz. kar\f2\'ba\u305?\f0 m\f2\u305?\f0 za 3 se\f1\lang1033\'e7\f0\lang1055 enek geliyor. alttaki 2si tercih etmedi\f2\u287?\f0 imiz \f2\'ba\f0 ablonlard\f2\u305?\f0 r. ba\f2\u287?\u305?\f0 ml\f2\u305?\f0 l\f2\u305?\f0 klar i\f1\lang1033\'e7\f0\lang1055 erir. o y\f1\lang1033\'fc\f0\lang1055 zden "API controller empty" se\f1\lang1033\'e7\f0\lang1055 iyoruz.\par
proje ismi olarak ProductsController diyoruz.\par
controller isimlendirmesi \f1\lang1033\'e7\f0\lang1055 o\f2\u287?\f0 ul yap\f2\u305?\f0 l\f2\u305?\f0 r. \f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 nlerin controller kodlar\f2\u305?\f0  anlam\f2\u305?\f0 na gelir.\par
-----------------------\par
\f2\'ba\f0 imdi olu\f2\'ba\f0 turdu\f2\u287?\f0 umuz controller s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 n\f2\u305?\f0  inceleyelim.\par
\cf1 bir controller\f2\u305?\f0 n controller olabilmesi i\f1\lang1033\'e7\f0\lang1055 in ControllerBase s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 ndan inherit edilmesi gerekmektedir.\cf0\par
ayn\f2\u305?\f0  zamanda, [apicontroller] olarak bir attribute sahip olmal\f2\u305?\f0 d\f2\u305?\f0 r.\par
bu k\f1\lang1033\'f6\f2\lang1055\'ba\f0 eli parantez yap\f2\u305?\f0 s\f2\u305?\f0 na attribute denir. (\f1\lang1033\'f6\f0\lang1055 devlerde attribute kavram\f2\u305?\f0  daha derin ara\f2\'ba\f0 t\f2\u305?\f0 r\f2\u305?\f0 lacak.)\par
\f1\lang1033\'f6\f0\lang1055 zet olarak \cf1 attribute; bir class\f2\u305?\f0  imzalama y\f1\lang1033\'f6\f0\lang1055 ntemidir.\par
\cf0\f2\'ba\f0 imdi controller s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 n\f2\u305?\f0 n i\f1\lang1033\'e7\f0\lang1055 ine bir operasyon yazal\f2\u305?\f0 m. (kodlara bak)\par
--------------------\par
\cf1 Route \cf0 = bize domain \f1\lang1033\'fc\f0\lang1055 zerinde bu controller'a ula\f2\'ba\f0 aca\f2\u287?\u305?\f0 m\f2\u305?\f0 z yolu tan\f2\u305?\f0 mlar.\par
projeyi \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\f0 t\f2\u305?\f0 r\f2\u305?\f0 p, link \f1\lang1033\'fc\f0\lang1055 zerinden \cf1 localhost.../api/products \cf0 yazarsak, products isimli controller s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0  \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\u305?\f0 r.\par
bu isimlendirme standard\f2\u305?\f0  .net taraf\f2\u305?\f0 ndan belirlenmi\f2\'ba\f0 tir.\par
yani \cf1 class ProductsController \cf0 dedi\f2\u287?\f0 imizde controller ismimiz \cf1 Products \cf0 olur.\par
(run butonunun (IIS Express) yan\f2\u305?\f0 ndaki k\f1\lang1033\'fc\'e7\'fc\f0\lang1055 k t\f2\u305?\f0 rna\f2\u287?\f0 a t\f2\u305?\f0 klayarak "web browser" se\f1\lang1033\'e7\f0\lang1055 ene\f2\u287?\f0 ine gidebiliriz. buradan istedi\f2\u287?\f0 imiz browser'\f2\u305?\f0  se\f1\lang1033\'e7\f0\lang1055 ebiliriz.)\par
\f1\lang1033\'f6\f0\lang1055 rnek bir get metodu yaz\f2\u305?\f0 p postman \f1\lang1033\'fc\f0\lang1055 zerinden denedik ve JSON veriyi g\f1\lang1033\'f6\f0\lang1055 rd\f1\lang1033\'fc\f0\lang1055 k.\par
--------- 2. b\f1\lang1033\'f6\f0\lang1055 l\f1\lang1033\'fc\f0\lang1055 m -------------\par
\f2\'ba\f0 imdi kendi projemizle alakal\f2\u305?\f0  bir get metodu yazaca\f2\u287?\u305?\f0 z.\par
productService nesnesi yarat\f2\u305?\f0 yoruz.\par
\cf2\f3\fs19     IProductService productService = \cf3 new\cf2  ProductManager(\cf3 new\cf2  EfProductDal());\par
\cf3\f4     \f3 var\cf2  result = productService.GetAll();\par
    \cf3 return\cf2  result.Data;\par
\cf0\f0\fs28 ancak burada bir ba\f2\u287?\u305?\f0 ml\f2\u305?\f0 l\f2\u305?\f0 k yaratm\f2\u305?\'ba\f0  olduk. burada sa\f2\u287?\f0 lam bir kod refactoring yapaca\f2\u287?\u305?\f0 z.\par
burada asl\f2\u305?\f0 nda bir "dependency chain" var.\par
yani ba\f2\u287?\u305?\f0 ml\f2\u305?\f0 l\f2\u305?\f0 k zinciri.\par
IProductService bir ProductManager'a ihtiya\f1\lang1033\'e7\f0\lang1055  duyuyor.\par
ProductManager da EfProductDal'a ihtiya\f1\lang1033\'e7\f0\lang1055  duyuyor.\par
asl\f2\u305?\f0 nda bizim bu get metodumuz sadece productManager'a ihtiya\f1\lang1033\'e7\f0\lang1055  duyuyor. sonu\f1\lang1033\'e7\f0\lang1055 ta product'lar\f2\u305?\f0  get yap\f2\u305?\f0 yor sadece.\par
\par
ayn\f2\u305?\f0  productManager s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 nda yapt\f2\u305?\u287?\u305?\f0 m\f2\u305?\f0 z gibi, injection yapaca\f2\u287?\u305?\f0 z.\par
\par
\cf2\f3\fs19 IProductService _productService;\par
\par
        \cf3 public\cf2  \cf4 ProductsController\cf2 (IProductService productService)\par
        \{\par
            _productService = productService;\par
        \}\par
\par
\cf0\f0\fs28 Bu \f2\'ba\f0 ekilde constructor injection yap\f2\u305?\f0 yoruz Controller s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 m\f2\u305?\f0 z i\f1\lang1033\'e7\f0\lang1055 in de.\par
Bu haliyle bu controller "loosely coupled" bir hale d\f1\lang1033\'f6\f0\lang1055 n\f1\lang1033\'fc\f2\lang1055\'ba\f0 t\f1\lang1033\'fc\f0\lang1055 .\par
\cf1 Loosely Coupled \cf0 = soyut bir s\f2\u305?\f0 n\f2\u305?\f0 fa ba\f2\u287?\u305?\f0 ml\f2\u305?\f0  olan demektir.\par
Az \f1\lang1033\'f6\f0\lang1055 nceki k\f1\lang1033\'f6\f0\lang1055 t\f1\lang1033\'fc\f0\lang1055  kodumuz, somut bir s\f2\u305?\f0 n\f2\u305?\f0 fa ba\f2\u287?\u305?\f0 ml\f2\u305?\f0 yd\f2\u305?\f0 .\par
\par
hi\f1\lang1033\'e7\f0\lang1055 bir zaman somut s\f2\u305?\f0 n\f2\u305?\f0 flarla ba\f2\u287?\f0 lant\f2\u305?\f0  kurmamak gerekir.\par
her zaman soyut yap\f2\u305?\f0 lar ile ba\f2\u287?\u305?\f0 ml\f2\u305?\f0 l\f2\u305?\f0 k yarat\f2\u305?\f0 lmal\f2\u305?\f0 d\f2\u305?\f0 r.\par
yani SOLID prensiplerine uymam\f2\u305?\f0 z gerekiyor her zamanki gibi.\par
\par
biz yukar\f2\u305?\f0 daki gibi bir injection yapt\f2\u305?\f0 k ama peki somut productManager nesnesini nas\f2\u305?\f0 l verece\f2\u287?\f0 iz???\par
\f1\lang1033\'e7\'fc\f0\lang1055 nk\f1\lang1033\'fc\f0\lang1055  controller i\f1\lang1033\'e7\f0\lang1055 inde verdi\f2\u287?\f0 imiz anda tekrar ba\f2\u287?\u305?\f0 ml\f2\u305?\f0  hale gelece\f2\u287?\f0 iz.\par
\cf1\f2\u304?\'aa\f0 TE TAM BU SORUNDAN DOLAYI IOC Container devreye giriyor\cf0 .\par
\cf1 IoC Container\cf0 : Inversion of Contol\par
ioc container \f2\'ba\f0 u i\f2\'ba\f0 i yap\f2\u305?\f0 yor.\par
bellekte bir tane container olu\f2\'ba\f0 uyor. yani bir List tarz\f2\u305?\f0 nda verilerin sakland\f2\u305?\u287?\u305?\f0  bir alan. bu alanda ihtiyac\f2\u305?\f0 m\f2\u305?\f0 z olan somut s\f2\u305?\f0 n\f2\u305?\f0 flar\f2\u305?\f0 n newlenmi\f2\'ba\f0  birer \f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 i tutuluyor.\par
new ProductManager();\par
new EfProductDal();\par
tarz\f2\u305?\f0 nda somut s\f2\u305?\f0 n\f2\u305?\f0 flar\f2\u305?\f0 n instancelar\f2\u305?\f0  tutuluyor.\f1\lang1033\par
\f0\lang1055 ihtiyac\f2\u305?\f0 m\f2\u305?\f0 z olan somut s\f2\u305?\f0 n\f2\u305?\f0 flar\f2\u305?\f0 n instancelar\f2\u305?\f0 na bu container \f1\lang1033\'fc\f0\lang1055 zerinden kolayca eri\f2\'ba\f0 ebiliyoruz.\par
peki bunu nas\f2\u305?\f0 l yapaca\f2\u287?\u305?\f0 z >\par
WebAPI projesinin alt\f2\u305?\f0 nda kendili\f2\u287?\f0 inden yer alan bir s\f2\u305?\f0 n\f2\u305?\f0 f var. \par
Startup.cs s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0  g\f1\lang1033\'f6\f0\lang1055 rece\f2\u287?\f0 iz burada. ona t\f2\u305?\f0 kl\f2\u305?\f0 yoruz.\par
(ioc container mant\f2\u305?\u287?\u305?\f0 n\f2\u305?\f0  her t\f1\lang1033\'fc\f0\lang1055 rl\f1\lang1033\'fc\f0\lang1055  projede kullan\f2\u305?\f0 labilir.)\par
\par
bu webAPI'nin kendi i\f1\lang1033\'e7\f0\lang1055 inde haz\f2\u305?\f0 r bir ioc yap\f2\u305?\f0 s\f2\u305?\f0  var.\par
\par
\cf3\f3\fs19 public\cf2  \cf3 void\cf2  ConfigureServices(IServiceCollection services)\par
        \{\par
            services.AddControllers();\par
            services.AddSingleton<IProductService, ProductManager>();\par
        \}\par
\cf0\f0\fs28\par
bu \f2\'ba\f0 ekilde singleton bir yap\f2\u305?\f0  ekliyoruz.\par
IProductService g\f1\lang1033\'f6\f0\lang1055 rd\f1\lang1033\'fc\f2\lang1055\u287?\f1\lang1033\'fc\f0\lang1055 nde, ProductManager s\f2\u305?\f0 n\f2\u305?\f0 f\f2\u305?\f0 ndan bir instance olu\f2\'ba\f0 tur demi\f2\'ba\f0  oluyoruz. Ancak singleton yap\f2\u305?\f0 s\f2\u305?\f0 n\f2\u305?\f0  se\f1\lang1033\'e7\f0\lang1055 ti\f2\u287?\f0 imiz i\f1\lang1033\'e7\f0\lang1055 in, tek bir tane instance olu\f2\'ba\f0 acak bellekte. ve her zaman ayn\f2\u305?\f0  instance kullan\f2\u305?\f0 lacak.\par
\par
ipucu (i\f1\lang1033\'e7\f0\lang1055 inde data tutuyorsak, singleton YAPMAMLIYIZ. \f1\lang1033\'f6\f0\lang1055 rne\f2\u287?\f0 in bir eticaret uygulamas\f2\u305?\f0 nda SEPET i\f1\lang1033\'e7\f0\lang1055 in singleton bir yap\f2\u305?\f0  kurarsak herkesin sepeti birbirine girer. o sebeple, data i\f1\lang1033\'e7\f0\lang1055 ermeyen yap\f2\u305?\f0 lardan singleton bir instance yaratabiliriz.)\par
bu ioc yap\f2\u305?\f0 s\f2\u305?\f0  sadece apilerde kullan\f2\u305?\f0 lmaz. her t\f1\lang1033\'fc\f0\lang1055 rl\f1\lang1033\'fc\f0\lang1055  projede bu yap\f2\u305?\f0  uygulanabilir ve uygulanmal\f2\u305?\f0 d\f2\u305?\f0 r.\par
\par
\f1\lang1033\'f6\f0\lang1055 dev olarak;\par
\tab AddScoped ve AddTransient yap\f2\u305?\f0 lar\f2\u305?\f0  ara\f2\'ba\f0 t\f2\u305?\f0 r\f2\u305?\f0 lacak.\f1\lang1033\par
\f0\lang1055\par
bu sefer \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\f0 t\f2\u305?\f0 r\f2\u305?\f0 rsak hata al\f2\u305?\f0 r\f2\u305?\f0 z.\par
\f1\lang1033\'e7\'fc\f0\lang1055 nk\f1\lang1033\'fc\f0\lang1055  ProductManager'\f2\u305?\f0  newlemeye \f1\lang1033\'e7\f0\lang1055 al\f2\u305?\'ba\u305?\f0 rken, onun da ba\f2\'ba\f0 ka bir s\f2\u305?\f0 n\f2\u305?\f0 fa ba\f2\u287?\u305?\f0 ml\f2\u305?\f0  oldu\f2\u287?\f0 unu g\f1\lang1033\'f6\f0\lang1055 recek. bu sebepten dolay\f2\u305?\f0  newleyemeyecek.\par
o y\f1\lang1033\'fc\f0\lang1055 zden bu kodu da ekliyoruz.\par
\cf2\f3\fs19             services.AddSingleton<IProductDal, EfProductDal>();\par
\cf0\f0\fs28 ----------------------------\par
metodun d\f1\lang1033\'f6\f0\lang1055 n\f1\lang1033\'fc\f2\lang1055\'ba\f0  de\f2\u287?\f0 erini IActionResult olarak de\f2\u287?\f0 i\f2\'ba\f0 tirdik.\par
----\par
http status code sonucu g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz postman ekran\f2\u305?\f0 nda.\par
i\f2\'ba\f0 lem ba\f2\'ba\f0 ar\f2\u305?\f0 l\f2\u305?\f0  oldu\f2\u287?\f0 u i\f1\lang1033\'e7\f0\lang1055 in 200 OK sonucunu g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz.\par
WebAPI ayn\f2\u305?\f0  zamanda bize, bu http status code g\f1\lang1033\'f6\f0\lang1055 ndermemizi sa\f2\u287?\f0 layan altyap\f2\u305?\f0 y\f2\u305?\f0  da sunuyor.\par
Ok() metodu veya BadRequest() gibi metotlarla http durum kodlar\f2\u305?\f0  g\f1\lang1033\'f6\f0\lang1055 ndeririz.\par
Bu sebepten dolay\f2\u305?\f0  GET metodunun d\f1\lang1033\'f6\f0\lang1055 n\f1\lang1033\'fc\f2\lang1055\'ba\f0  de\f2\u287?\f0 erini List yerine IActionResult yap\f2\u305?\f0 yoruz. http status metotlar\f2\u305?\f0  d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rebilece\f2\u287?\f0 iz bu sayede.\par

\pard\sl276\slmult1\qj\cf3\f3 public\cf2  IActionResult Get()\par
\{\par
      \cf3 var\cf2  result = _productService.GetAll();\par
      \cf3 if\cf2  (result.Success)\par
      \{\par
           \cf3 return\cf2  Ok(result);\par
      \}\par
      \cf3 else\cf2\par
      \{\par
           \cf3 return\cf2  BadRequest(result.Message);\par
      \}\par
 \}\cf0\f0\par

\pard\sa200\sl276\slmult1\qj\par
bu \f2\'ba\f0 ekilde, daha \f1\lang1033\'f6\f0\lang1055 nce kurgulad\f2\u305?\u287?\u305?\f0 m\f2\u305?\f0 z DataResult yap\f2\u305?\f0 s\f2\u305?\f0  sayesinde, Success sonucunu kullanarak http status metotlar\f2\u305?\f0 n\f2\u305?\f0  tasarlad\f2\u305?\f0 k.\par
result.Success == true ise http 200 OK status kodu g\f1\lang1033\'f6\f0\lang1055 nderiyoruz.\par
false ise badrequest d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz.\par
\par
Do\f2\u287?\f0 rudan \par
\tab\cf3\f3 return\cf2  Ok();\f5\lang1033\par
\f0\lang1055 olarak sonu\f1\lang1033\'e7\f0\lang1055  d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 rsek, sadece "200 OK" sonucu d\f1\lang1033\'f6\f0\lang1055 ner. datay\f2\u305?\f0  d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rm\f1\lang1033\'fc\f2\lang1055\'ba\f0  olmay\f2\u305?\f0 z. bu y\f1\lang1033\'fc\f0\lang1055 zden,\f4\par
\tab\cf3\f3 return\cf2  Ok(result);\cf0\f0\par
olarak i\f1\lang1033\'e7\f0\lang1055 inde datay\f2\u305?\f0  da d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz.\par

\pard\li720\sa200\sl276\slmult1\qj\cf3\f3 return\cf2  Ok(result\f4 .Data\f3 );\cf0\f0\par

\pard\sa200\sl276\slmult1\qj olarak da d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rebilirdik. ancak biz result i\f1\lang1033\'e7\f0\lang1055 indeki 3 bilgiyi de d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rmek istiyoruz \f2\'ba\f0 imdilik.\par
\tab\f4 result.Data\par
\tab result.Message\par
\tab result.Success\f0\par
bu  3 veriyi de JSON olarak d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rece\f2\u287?\f0 iz. BadRequest durumunda ise\par
\tab\cf3\f3 return\cf2  BadRequest(result.Message);\par
\f0 sadece mesaj d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rece\f2\u287?\f0 iz.\cf0\par
\par
Fakat biz BadRequest i\f1\lang1033\'e7\f0\lang1055 inde result d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 rseydik, bu sefer \par
\tab "data": null olarak d\f1\lang1033\'f6\f0\lang1055 necekti.\par
Fakat bunun anlam\f2\u305?\f0 , "data d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055  ama veri null" mu yoksa "data bir hatadan dolay\f2\u305?\f0  d\f1\lang1033\'f6\f0\lang1055 nemedi o y\f1\lang1033\'fc\f0\lang1055 zden null" mu anlamam\f2\u305?\f0 z gerekiyor.\par
i\f2\'ba\f0 te bu sebepten dolay\f2\u305?\f0  badrequest olarak d\f1\lang1033\'f6\f0\lang1055 nd\f1\lang1033\'fc\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz ki, apiden veriyi alan ki\f2\'ba\f0 i "null" g\f1\lang1033\'f6\f0\lang1055 rd\f1\lang1033\'fc\f2\lang1055\u287?\f1\lang1033\'fc\f0\lang1055  zaman ikilemde kalmas\f2\u305?\f0 n diye.\par
burada http status detection yapmam\f2\u305?\f0 z gerekiyor bu sebepten dolay\f2\u305?\f0 .\par
200 g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 rsek, data nullmu\f2\'ba\f0  deriz.\par
400 g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 rsek, data d\f1\lang1033\'f6\f0\lang1055 nmedi bir hata var. o sebepten null g\f1\lang1033\'f6\f0\lang1055 r\f1\lang1033\'fc\f0\lang1055 yoruz diyece\f2\u287?\f0 iz.\par
--------------------------\par
\f2\'ba\f0 imdi bir tane de POST opeasyonu yazal\f2\u305?\f0 m\par
yani 1 tane data ekleyece\f2\u287?\f0 iz.\par
---------------------------------\par
1 tane daha get metodu yazaca\f2\u287?\u305?\f0 z.\par
id'ye g\f1\lang1033\'f6\f0\lang1055 re product get yapan metot.\par
parametre olarak id veriyoruz.\par
2 get metodunun \f1\lang1033\'e7\f0\lang1055 ak\f2\u305?\'ba\f0 mamas\f2\u305?\f0  i\f1\lang1033\'e7\f0\lang1055 in yapmam\f2\u305?\f0 z gereken;\par
[HttpGet("getall")] tarz\f2\u305?\f0 nda isimlendirme yap\f2\u305?\f0 yoruz. yani alias\par
metot isimlerini de ona g\f1\lang1033\'f6\f0\lang1055 re d\f1\lang1033\'fc\f0\lang1055 zeltiyoruz. GetAll yap\f2\u305?\f0 yoruz metot ad\f2\u305?\f0 n\f2\u305?\f0  da.\par
\par
[HttpGet("getbyid")]\par
..../products/getbyid?id=1\par
yukar\f2\u305?\f0 daki \f2\'ba\f0 ekilde get at\f2\u305?\f0 l\f2\u305?\f0 r.\par
\par
---------------\par
silme ve g\f1\lang1033\'fc\f0\lang1055 ncelleme i\f1\lang1033\'e7\f0\lang1055 in de POST kullan\f2\u305?\f0 labilir.\par
(normalde HTTPput ve httpdelete vard\f2\u305?\f0 r ama sekt\f1\lang1033\'f6\f0\lang1055 rde POST kullan\f2\u305?\f0 l\f2\u305?\f0 rm\f2\u305?\'ba\f0  genelde)\par
----------------------\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
\f1\lang31\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
\par
}
 